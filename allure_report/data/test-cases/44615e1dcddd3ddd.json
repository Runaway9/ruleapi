{"uid":"44615e1dcddd3ddd","name":"test_rule[52-http://127.0.0.1:9901/cont/validationContDetail-{\\n    \"batchCount\": null,\\n    \"batchNo\": null,\\n    \"batchNum\": null,\\n    \"bnfList\": [\\n        {\\n            \"bnfGrade\": \"1\",\\n            \"bnfNo\": 100000,\\n            \"bnfType\": 0.0,\\n            \"idexpDate\": 253402185600000,\\n            \"idno\": \"330281198710194180\",\\n            \"idtype\": \"A\",\\n            \"insuredNo\": \"253402185600000\",\\n            \"nativePlace\": \"CHN\",\\n            \"relationtoInsured\": \"1\",\\n            \"rgtAddress\": \"\\u6237\\u53e3\\u6240\\u5728\\u5730\",\\n            \"sex\": \"1\"\\n        }\\n    ],\\n    \"bomAgent\": {\\n        \"agentCode\": \"6601300024\",\\n        \"agentState\": \"04\",\\n        \"blacklisFlag\": \"A\",\\n        \"branchType\": \"3\",\\n        \"outWorkDate\": 1582905600000\\n    },\\n    \"bomAppnt\": {\\n        \"address\": \"\\u676d\\u5dde\",\\n        \"appntAge\": 16,\\n        \"avoirdupois\": 70,\\n        \"companyPhone\": \"\\u516c\\u53f8\\u7535\\u8bdd\",\\n        \"email\": \"342304792@qq.com\",\\n        \"homePhone\": \"\\u56fa\\u5b9a\\u7535\\u8bdd\",\\n        \"idexpDate\": 253402185600000,\\n        \"idno\": \"330281198710194180\",\\n        \"idtype\": \"0\",\\n        \"mobile\": \"15958811700\",\\n        \"nativePlace\": \"CHN\",\\n        \"occupationCode\": \"0103002\",\\n        \"occupationType\": \"1\",\\n        \"personalProve\": \"1\",\\n        \"postalAddress\": \"\\u6d59\\u6c5f\\u7701\\u5b81\\u6ce2\\u5e02\",\\n        \"relationtoInsured\": \"00\",\\n        \"rgtAddress\": \"\\u6237\\u53e3\\u6240\\u5728\\u5730\",\\n        \"sameAddessPNum\": 0,\\n        \"sex\": \"1\",\\n        \"stature\": 178,\\n        \"taxType\": \"\\u7a0e\\u6536\\u5c45\\u6c11\\u7c7b\\u578b\",\\n        \"yearIncome\": 0.0\\n    },\\n    \"bomGrpCustomer\": null,\\n    \"bomGrpPolicy\": null,\\n    \"bomPolicy\": {\\n        \"Amnt\": 0.0,\\n        \"agentCom\": \"0601010079\",\\n        \"agentType\": \"3\",\\n        \"contNo\": \"2018060402000013\",\\n        \"forceUWFlag\": \"0\",\\n        \"lowestOneYearPrem\": 0,\\n        \"oneMSumDangerAmnt\": \"-1\",\\n        \"payIntv\": 0,\\n        \"polApplyDate\": 1528041600000,\\n        \"prem\": 0.0,\\n        \"saleChnl\": \"04\",\\n        \"sellType\": \"01\"\\n    },\\n    \"bussiType\": \"TB\",\\n    \"contNo\": \"2022111401000003\",\\n    \"dutyList\": null,\\n    \"grpContNo\": \"00000000000000000000\",\\n    \"grpPolList\": [\\n        {\\n            \"amnt\": 0.0,\\n            \"bonusFlag\": \"1\",\\n            \"bonusGetMode\": \"2\",\\n            \"insuYear\": 1,\\n            \"insuYearFlag\": \"Y\",\\n            \"payEndYearFlag\": \"Y\",\\n            \"payIntv\": 0,\\n            \"payYears\": 0,\\n            \"prem\": 0.0,\\n            \"riskCode\": \"211601\",\\n            \"riskPeroid\": \"L\",\\n            \"rnewFlag\": \"1\"\\n        }\\n    ],\\n    \"immediateinventorydataAppnt\": null,\\n    \"immediateinventorydataInsu\": null,\\n    \"inputOperator\": \"ybt\",\\n    \"insuredList\": [\\n        {\\n            \"address\": \"\\u88ab\\u4fdd\\u4eba\\u5730\\u5740\",\\n            \"avoirdupois\": 70,\\n            \"birthDay\": 561571200000,\\n            \"companyPhone\": \"\\u516c\\u53f8\\u7535\\u8bdd\",\\n            \"homePhone\": \"\\u56fa\\u5b9a\\u7535\\u8bdd\",\\n            \"idexpDate\": 253402185600000,\\n            \"idno\": \"330281198710194180\",\\n            \"idtype\": \"0\",\\n            \"insuredAge\": \"16\",\\n            \"insuredNo\": \"253402185600000\",\\n            \"lfsumDangerAmnt42\": \"12000001\",\\n            \"mobile\": \"15958811700\",\\n            \"nativePlace\": \"CHN\",\\n            \"occupationCode\": \"0103002\",\\n            \"occupationType\": \"1\",\\n            \"polApplyDate\": 1528041600000,\\n            \"postalAddress\": \"\\u6d59\\u6c5f\\u7701\\u5b81\\u6ce2\\u5e02\",\\n            \"preferredPhone\": \"\\u9996\\u9009\\u7535\\u8bdd\",\\n            \"qualityState\": null,\\n            \"relationToAppnt\": \"00\",\\n            \"rgtAddress\": \"\\u6237\\u53e3\\u6240\\u5728\\u5730\",\\n            \"riskCount1066005\": 0,\\n            \"sameAddessPNum\": 0,\\n            \"sex\": \"1\",\\n            \"stature\": 178,\\n            \"sumJTAmnt\": \"301\",\\n            \"taxType\": \"\\u7a0e\\u6536\\u5c45\\u6c11\\u7c7b\\u578b\",\\n            \"yearIncome\": \"1\",\\n            \"yearIncome10\": 0.0,\\n            \"yearIncome15\": 0.0,\\n            \"yearIncome20\": 0.0,\\n            \"yearIncome8\": 0.0\\n        }\\n    ],\\n    \"mainPolList\": [\\n        {\\n            \"amnt\": 0.0,\\n            \"bonusFlag\": \"1\",\\n            \"bonusGetMode\": \"2\",\\n            \"insuYear\": 10,\\n            \"insuYearFlag\": \"Y\",\\n            \"insuredNo\": \"253402185600000\",\\n            \"mainPolNo\": \"\",\\n            \"payEndYearFlag\": \"Y\",\\n            \"payIntv\": 0,\\n            \"payYears\": 0,\\n            \"prem\": 0.0,\\n            \"riskCode\": \"00\",\\n            \"riskPeroid\": \"L\",\\n            \"riskStyle\": null,\\n            \"rnewFlag\": \"1\"\\n        }\\n    ],\\n    \"policyList\": null,\\n    \"ruleFlag\": \"U\",\\n    \"saleChnl\": \"04\",\\n    \"sellType\": \"01\",\\n    \"subPolList\": [\\n        {\\n            \"amnt\": 0.0,\\n            \"contPlanCode\": \"\\u4fdd\\u9669\\u8ba1\\u5212\\u7f16\\u7801\",\\n            \"insuYear\": 1,\\n            \"insuYearFlag\": \"Y\",\\n            \"insuredNo\": \"253402185600000\",\\n            \"mainPolNo\": \"\",\\n            \"payEndYearFlag\": \"Y\",\\n            \"payIntv\": 0,\\n            \"payYears\": 0,\\n            \"prem\": 0.0,\\n            \"riskCode\": \"211601\",\\n            \"riskPeroid\": \"L\",\\n            \"rnewFlag\": \"1\"\\n        }\\n    ],\\n    \"ybtContNo\": null\\n}-\\u88ab\\u4fdd\\u9669\\u4eba\\u7d2f\\u8ba1\\u65e5\\u989d\\u4e0d\\u5f97\\u8d85\\u8fc7\\u5176\\u5e74\\u6536\\u5165\\u76842\\u2030\\uff0c\\u4e14\\u4ee5300\\u5143\\u4e3a\\u9650-\\u89c4\\u5219\\u88ab\\u6821\\u9a8c-P010100000012198]","fullName":"rule_test#test_rule","historyId":"03b38b278428b695b2ac8b7d20620ebf","time":{"start":1699852600102,"stop":1699852600249,"duration":147},"status":"failed","statusMessage":"AssertionError: assert 1 == 2","statusTrace":"case_name = 52, url = 'http://127.0.0.1:9901/cont/validationContDetail'\nparams = '{\\n    \"batchCount\": null,\\n    \"batchNo\": null,\\n    \"batchNum\": null,\\n    \"bnfList\": [\\n        {\\n            \"bn...\": \"211601\",\\n            \"riskPeroid\": \"L\",\\n            \"rnewFlag\": \"1\"\\n        }\\n    ],\\n    \"ybtContNo\": null\\n}'\nassertion = '被保险人累计日额不得超过其年收入的2‰，且以300元为限', PassOrNot = '规则被校验', cal_code = 'P010100000012198'\n\n    @pytest.mark.parametrize(\n        \"case_name, url, params, assertion, PassOrNot, cal_code\",\n        zip(rule_xls['case_name'], (rule_xls['url']), rule_xls['params'], (rule_xls['assertion']),\n            (rule_xls['PassOrNot']), rule_xls['cal_code'])\n    )\n    def test_rule(case_name, url, params, assertion, PassOrNot, cal_code):\n        for i in enumerate(str(params)):\n            print('Excel测试用例编号', case_name)\n            print('测试词条为', cal_code)\n            sqlf = str(params).encode('utf-8')\n            # 利安外网投保\n            # info = requests.post(url='http://119.91.31.248:91/tbcont/validationTBContDetail', data=sqlf,\n            #                       headers=header).text\n            # 利安外网核保\n            # info = requests.post(url='http://119.91.31.248:91/cont/validationContDetail', data=sqlf, headers=header).text\n            # 中韩外网核保\n            info = requests.post(url='http://101.35.132.237/rule-actuator/cont/validationContDetail', data=sqlf,\n                                 headers=header).text\n            print('返回结果为：', info)\n            object = json.loads(info)['data']['policyList']\n            if PassOrNot == '规则被校验':\n                if json.loads(info)['data']:\n                    if json.loads(info)['data']['policyList']:\n                        if json.loads(info)['data']['policyList']:\n                            my_list = ['']\n                            for item in object:\n                                my_list.append(item['ruleCode'])\n                            try:\n                                index = my_list.index(cal_code)\n                            except ValueError:\n                                index = -1\n                            if index != -1:\n                                print(cal_code, \"有被校验，通过\")\n                                assert 1 == 1\n                            else:\n                                print(cal_code, \"未被校验到，不通过\")\n>                               assert 1 == 2\nE                               assert 1 == 2\n\nrule_test.py:53: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"suite","value":"rule_test"},{"name":"host","value":"MateBook"},{"name":"thread","value":"8676-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"rule_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"PassOrNot","value":"'规则被校验'"},{"name":"assertion","value":"'被保险人累计日额不得超过其年收入的2‰，且以300元为限'"},{"name":"cal_code","value":"'P010100000012198'"},{"name":"case_name","value":"52"},{"name":"params","value":"'{\n    \"batchCount\": null,\n    \"batchNo\": null,\n    \"batchNum\": null,\n    \"bnfList\": [\n        {\n            \"bnfGrade\": \"1\",\n            \"bnfNo\": 100000,\n            \"bnfType\": 0.0,\n            \"idexpDate\": 253402185600000,\n            \"idno\": \"330281198710194180\",\n            \"idtype\": \"A\",\n            \"insuredNo\": \"253402185600000\",\n            \"nativePlace\": \"CHN\",\n            \"relationtoInsured\": \"1\",\n            \"rgtAddress\": \"户口所在地\",\n            \"sex\": \"1\"\n        }\n    ],\n    \"bomAgent\": {\n        \"agentCode\": \"6601300024\",\n        \"agentState\": \"04\",\n        \"blacklisFlag\": \"A\",\n        \"branchType\": \"3\",\n        \"outWorkDate\": 1582905600000\n    },\n    \"bomAppnt\": {\n        \"address\": \"杭州\",\n        \"appntAge\": 16,\n        \"avoirdupois\": 70,\n        \"companyPhone\": \"公司电话\",\n        \"email\": \"342304792@qq.com\",\n        \"homePhone\": \"固定电话\",\n        \"idexpDate\": 253402185600000,\n        \"idno\": \"330281198710194180\",\n        \"idtype\": \"0\",\n        \"mobile\": \"15958811700\",\n        \"nativePlace\": \"CHN\",\n        \"occupationCode\": \"0103002\",\n        \"occupationType\": \"1\",\n        \"personalProve\": \"1\",\n        \"postalAddress\": \"浙江省宁波市\",\n        \"relationtoInsured\": \"00\",\n        \"rgtAddress\": \"户口所在地\",\n        \"sameAddessPNum\": 0,\n        \"sex\": \"1\",\n        \"stature\": 178,\n        \"taxType\": \"税收居民类型\",\n        \"yearIncome\": 0.0\n    },\n    \"bomGrpCustomer\": null,\n    \"bomGrpPolicy\": null,\n    \"bomPolicy\": {\n        \"Amnt\": 0.0,\n        \"agentCom\": \"0601010079\",\n        \"agentType\": \"3\",\n        \"contNo\": \"2018060402000013\",\n        \"forceUWFlag\": \"0\",\n        \"lowestOneYearPrem\": 0,\n        \"oneMSumDangerAmnt\": \"-1\",\n        \"payIntv\": 0,\n        \"polApplyDate\": 1528041600000,\n        \"prem\": 0.0,\n        \"saleChnl\": \"04\",\n        \"sellType\": \"01\"\n    },\n    \"bussiType\": \"TB\",\n    \"contNo\": \"2022111401000003\",\n    \"dutyList\": null,\n    \"grpContNo\": \"00000000000000000000\",\n    \"grpPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"bonusFlag\": \"1\",\n            \"bonusGetMode\": \"2\",\n            \"insuYear\": 1,\n            \"insuYearFlag\": \"Y\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"211601\",\n            \"riskPeroid\": \"L\",\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"immediateinventorydataAppnt\": null,\n    \"immediateinventorydataInsu\": null,\n    \"inputOperator\": \"ybt\",\n    \"insuredList\": [\n        {\n            \"address\": \"被保人地址\",\n            \"avoirdupois\": 70,\n            \"birthDay\": 561571200000,\n            \"companyPhone\": \"公司电话\",\n            \"homePhone\": \"固定电话\",\n            \"idexpDate\": 253402185600000,\n            \"idno\": \"330281198710194180\",\n            \"idtype\": \"0\",\n            \"insuredAge\": \"16\",\n            \"insuredNo\": \"253402185600000\",\n            \"lfsumDangerAmnt42\": \"12000001\",\n            \"mobile\": \"15958811700\",\n            \"nativePlace\": \"CHN\",\n            \"occupationCode\": \"0103002\",\n            \"occupationType\": \"1\",\n            \"polApplyDate\": 1528041600000,\n            \"postalAddress\": \"浙江省宁波市\",\n            \"preferredPhone\": \"首选电话\",\n            \"qualityState\": null,\n            \"relationToAppnt\": \"00\",\n            \"rgtAddress\": \"户口所在地\",\n            \"riskCount1066005\": 0,\n            \"sameAddessPNum\": 0,\n            \"sex\": \"1\",\n            \"stature\": 178,\n            \"sumJTAmnt\": \"301\",\n            \"taxType\": \"税收居民类型\",\n            \"yearIncome\": \"1\",\n            \"yearIncome10\": 0.0,\n            \"yearIncome15\": 0.0,\n            \"yearIncome20\": 0.0,\n            \"yearIncome8\": 0.0\n        }\n    ],\n    \"mainPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"bonusFlag\": \"1\",\n            \"bonusGetMode\": \"2\",\n            \"insuYear\": 10,\n            \"insuYearFlag\": \"Y\",\n            \"insuredNo\": \"253402185600000\",\n            \"mainPolNo\": \"\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"00\",\n            \"riskPeroid\": \"L\",\n            \"riskStyle\": null,\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"policyList\": null,\n    \"ruleFlag\": \"U\",\n    \"saleChnl\": \"04\",\n    \"sellType\": \"01\",\n    \"subPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"contPlanCode\": \"保险计划编码\",\n            \"insuYear\": 1,\n            \"insuYearFlag\": \"Y\",\n            \"insuredNo\": \"253402185600000\",\n            \"mainPolNo\": \"\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"211601\",\n            \"riskPeroid\": \"L\",\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"ybtContNo\": null\n}'"},{"name":"url","value":"'http://127.0.0.1:9901/cont/validationContDetail'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"44615e1dcddd3ddd.json","parameterValues":["'规则被校验'","'被保险人累计日额不得超过其年收入的2‰，且以300元为限'","'P010100000012198'","52","'{\n    \"batchCount\": null,\n    \"batchNo\": null,\n    \"batchNum\": null,\n    \"bnfList\": [\n        {\n            \"bnfGrade\": \"1\",\n            \"bnfNo\": 100000,\n            \"bnfType\": 0.0,\n            \"idexpDate\": 253402185600000,\n            \"idno\": \"330281198710194180\",\n            \"idtype\": \"A\",\n            \"insuredNo\": \"253402185600000\",\n            \"nativePlace\": \"CHN\",\n            \"relationtoInsured\": \"1\",\n            \"rgtAddress\": \"户口所在地\",\n            \"sex\": \"1\"\n        }\n    ],\n    \"bomAgent\": {\n        \"agentCode\": \"6601300024\",\n        \"agentState\": \"04\",\n        \"blacklisFlag\": \"A\",\n        \"branchType\": \"3\",\n        \"outWorkDate\": 1582905600000\n    },\n    \"bomAppnt\": {\n        \"address\": \"杭州\",\n        \"appntAge\": 16,\n        \"avoirdupois\": 70,\n        \"companyPhone\": \"公司电话\",\n        \"email\": \"342304792@qq.com\",\n        \"homePhone\": \"固定电话\",\n        \"idexpDate\": 253402185600000,\n        \"idno\": \"330281198710194180\",\n        \"idtype\": \"0\",\n        \"mobile\": \"15958811700\",\n        \"nativePlace\": \"CHN\",\n        \"occupationCode\": \"0103002\",\n        \"occupationType\": \"1\",\n        \"personalProve\": \"1\",\n        \"postalAddress\": \"浙江省宁波市\",\n        \"relationtoInsured\": \"00\",\n        \"rgtAddress\": \"户口所在地\",\n        \"sameAddessPNum\": 0,\n        \"sex\": \"1\",\n        \"stature\": 178,\n        \"taxType\": \"税收居民类型\",\n        \"yearIncome\": 0.0\n    },\n    \"bomGrpCustomer\": null,\n    \"bomGrpPolicy\": null,\n    \"bomPolicy\": {\n        \"Amnt\": 0.0,\n        \"agentCom\": \"0601010079\",\n        \"agentType\": \"3\",\n        \"contNo\": \"2018060402000013\",\n        \"forceUWFlag\": \"0\",\n        \"lowestOneYearPrem\": 0,\n        \"oneMSumDangerAmnt\": \"-1\",\n        \"payIntv\": 0,\n        \"polApplyDate\": 1528041600000,\n        \"prem\": 0.0,\n        \"saleChnl\": \"04\",\n        \"sellType\": \"01\"\n    },\n    \"bussiType\": \"TB\",\n    \"contNo\": \"2022111401000003\",\n    \"dutyList\": null,\n    \"grpContNo\": \"00000000000000000000\",\n    \"grpPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"bonusFlag\": \"1\",\n            \"bonusGetMode\": \"2\",\n            \"insuYear\": 1,\n            \"insuYearFlag\": \"Y\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"211601\",\n            \"riskPeroid\": \"L\",\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"immediateinventorydataAppnt\": null,\n    \"immediateinventorydataInsu\": null,\n    \"inputOperator\": \"ybt\",\n    \"insuredList\": [\n        {\n            \"address\": \"被保人地址\",\n            \"avoirdupois\": 70,\n            \"birthDay\": 561571200000,\n            \"companyPhone\": \"公司电话\",\n            \"homePhone\": \"固定电话\",\n            \"idexpDate\": 253402185600000,\n            \"idno\": \"330281198710194180\",\n            \"idtype\": \"0\",\n            \"insuredAge\": \"16\",\n            \"insuredNo\": \"253402185600000\",\n            \"lfsumDangerAmnt42\": \"12000001\",\n            \"mobile\": \"15958811700\",\n            \"nativePlace\": \"CHN\",\n            \"occupationCode\": \"0103002\",\n            \"occupationType\": \"1\",\n            \"polApplyDate\": 1528041600000,\n            \"postalAddress\": \"浙江省宁波市\",\n            \"preferredPhone\": \"首选电话\",\n            \"qualityState\": null,\n            \"relationToAppnt\": \"00\",\n            \"rgtAddress\": \"户口所在地\",\n            \"riskCount1066005\": 0,\n            \"sameAddessPNum\": 0,\n            \"sex\": \"1\",\n            \"stature\": 178,\n            \"sumJTAmnt\": \"301\",\n            \"taxType\": \"税收居民类型\",\n            \"yearIncome\": \"1\",\n            \"yearIncome10\": 0.0,\n            \"yearIncome15\": 0.0,\n            \"yearIncome20\": 0.0,\n            \"yearIncome8\": 0.0\n        }\n    ],\n    \"mainPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"bonusFlag\": \"1\",\n            \"bonusGetMode\": \"2\",\n            \"insuYear\": 10,\n            \"insuYearFlag\": \"Y\",\n            \"insuredNo\": \"253402185600000\",\n            \"mainPolNo\": \"\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"00\",\n            \"riskPeroid\": \"L\",\n            \"riskStyle\": null,\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"policyList\": null,\n    \"ruleFlag\": \"U\",\n    \"saleChnl\": \"04\",\n    \"sellType\": \"01\",\n    \"subPolList\": [\n        {\n            \"amnt\": 0.0,\n            \"contPlanCode\": \"保险计划编码\",\n            \"insuYear\": 1,\n            \"insuYearFlag\": \"Y\",\n            \"insuredNo\": \"253402185600000\",\n            \"mainPolNo\": \"\",\n            \"payEndYearFlag\": \"Y\",\n            \"payIntv\": 0,\n            \"payYears\": 0,\n            \"prem\": 0.0,\n            \"riskCode\": \"211601\",\n            \"riskPeroid\": \"L\",\n            \"rnewFlag\": \"1\"\n        }\n    ],\n    \"ybtContNo\": null\n}'","'http://127.0.0.1:9901/cont/validationContDetail'"]}